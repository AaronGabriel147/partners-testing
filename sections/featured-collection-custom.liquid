{% stylesheet %}
    /* Style for the products grid to display horizontally */
    .product-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px; /* Adjust the space between products */
    }
    
    /* Style for individual products based on the number to display */
    .product {
      flex: 0 1 calc((100% / 4) - 20px); /* Adjust '4' based on the default number of products to show per row */
    }
    
    /* Style adjustments for different image shapes */
    .product img.round {
      border-radius: 50%;
    }
    
    /* Additional image shape styles can be added here */
    {% endstylesheet %}
    
    {% for block in section.blocks %}
    <div style="border: 1px solid blue" class="collection-block">
        <h2>{{ block.settings.block_title }}</h2>
        <p>{{ block.settings.block_description }}</p>
    
        <div class="product-grid">
            {% assign products = collections[block.settings.collection].products | limit: block.settings.products_to_show %}
            {% for product in products %}
            <div class="product">
                <a href="{{ product.url }}">
                    <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}" class="{{ block.settings.image_shape }}">
                    <h3>{{ product.title }}</h3>
                    <span>{{ product.price | money_with_currency }}</span>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    




    {% schema %}
        {
          "name": "Custom ft Collections",
          "class": "featured-collections",
          "max_blocks": 50,
          "blocks": [
            {
              "type": "collection_block",
              "name": "Collection Block",
              "settings": [
                {
                  "type": "text",
                  "id": "block_title",
                  "label": "Title",
                  "default": "Featured Collection"
                },
                {
                  "type": "textarea",
                  "id": "block_description",
                  "label": "Description",
                  "default": "Description of this collection."
                },
                {
                  "type": "collection",
                  "id": "collection",
                  "label": "Collection"
                },
                {
                  "type": "range",
                  "id": "products_to_show",
                  "label": "Products to Show",
                  "min": 1,
                  "max": 20,
                  "default": 4,
                  "step": 1
                },
                {
                  "type": "select",
                  "id": "image_shape",
                  "label": "Image Shape",
                  "options": [
                    {
                      "value": "default",
                      "label": "Default"
                    },
                    {
                      "value": "round",
                      "label": "Round"
                    }
                  ],
                  "default": "default"
                }
              ]
            }
          ],
          "settings": [],
          "presets": [
            {
              "name": "Default",
              "category": "Custom"
            }
          ]
        }
        {% endschema %}
        